<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Chess Engine - AI-Powered Chess Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&family=Geist:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    popover: {
                        DEFAULT: "var(--popover)",
                        foreground: "var(--popover-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                    chart: {
                        "1": "var(--chart-1)",
                        "2": "var(--chart-2)",
                        "3": "var(--chart-3)",
                        "4": "var(--chart-4)",
                        "5": "var(--chart-5)",
                    }
                },
                fontFamily: {
                    sans: ["var(--font-sans)"],
                    serif: ["var(--font-serif)"],
                    mono: ["var(--font-mono)"],
                }
            },
        }
    };
    </script>
    <style>
        :root {
            --card: hsl(47.14, 87.5%, 96.86%);
            --ring: hsl(39.27, 43.31%, 24.9%);
            --input: hsl(44.21, 26.76%, 86.08%);
            --muted: hsl(38.4, 60.98%, 91.96%);
            --accent: hsl(74.4, 39.68%, 87.65%);
            --border: hsl(44.21, 26.76%, 86.08%);
            --radius: 0.875rem;
            --shadow: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --chart-1: hsl(203.8863 88.2845% 53.1373%);
            --chart-2: hsl(159.7826 100% 36.0784%);
            --chart-3: hsl(42.0290 92.8251% 56.2745%);
            --chart-4: hsl(147.1429 78.5047% 41.9608%);
            --chart-5: hsl(341.4894 75.2000% 50.9804%);
            --popover: hsl(0 0% 100%);
            --primary: hsl(38.23, 87.6%, 74.71%);
            --sidebar: hsl(180 6.6667% 97.0588%);
            --spacing: 0.25rem;
            --font-mono: 'Space Grotesk', sans-serif;
            --font-sans: 'Lora', serif;
            --secondary: hsl(39.27, 43.31%, 24.9%);
            --shadow-lg: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 4px 6px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-md: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 2px 4px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-sm: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 8px 10px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --background: hsl(45, 100%, 96.86%);
            --font-serif: 'Geist', sans-serif;
            --foreground: hsl(38.18, 53.23%, 24.31%);
            --shadow-2xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-2xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --destructive: hsl(0.49, 54.19%, 55.49%);
            --sidebar-ring: hsl(202.8169 89.1213% 53.1373%);
            --sidebar-accent: hsl(211.5789 51.3514% 92.7451%);
            --sidebar-border: hsl(205.0000 25.0000% 90.5882%);
            --card-foreground: hsl(210 25% 7.8431%);
            --sidebar-primary: hsl(203.8863 88.2845% 53.1373%);
            --tracking-normal: 0em;
            --muted-foreground: hsl(38.18, 53.23%, 24.31%);
            --accent-foreground: hsl(91.43, 10.55%, 39.02%);
            --popover-foreground: hsl(210 25% 7.8431%);
            --primary-foreground: hsl(39.27, 43.31%, 24.9%);
            --sidebar-foreground: hsl(210 25% 7.8431%);
            --secondary-foreground: hsl(39.75, 86.96%, 81.96%);
            --destructive-foreground: hsl(0 0% 100%);
            --sidebar-accent-foreground: hsl(203.8863 88.2845% 53.1373%);
            --sidebar-primary-foreground: hsl(0 0% 100%);
        }

        .dark {
            --card: hsl(228 9.8039% 10%);
            --ring: hsl(202.8169 89.1213% 53.1373%);
            --input: hsl(207.6923 27.6596% 18.4314%);
            --muted: hsl(0 0% 9.4118%);
            --accent: hsl(205.7143 70% 7.8431%);
            --border: hsl(210 5.2632% 14.9020%);
            --radius: 1.3rem;
            --shadow: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --chart-1: hsl(203.8863 88.2845% 53.1373%);
            --chart-2: hsl(159.7826 100% 36.0784%);
            --chart-3: hsl(42.0290 92.8251% 56.2745%);
            --chart-4: hsl(147.1429 78.5047% 41.9608%);
            --chart-5: hsl(341.4894 75.2000% 50.9804%);
            --popover: hsl(0 0% 0%);
            --primary: hsl(203.7736 87.6033% 52.5490%);
            --sidebar: hsl(228 9.8039% 10%);
            --spacing: 0.25rem;
            --font-mono: Menlo, monospace;
            --font-sans: Open Sans, sans-serif;
            --secondary: hsl(195.0000 15.3846% 94.9020%);
            --shadow-lg: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 4px 6px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-md: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 2px 4px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-sm: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 8px 10px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --background: hsl(0 0% 0%);
            --font-serif: Georgia, serif;
            --foreground: hsl(200 6.6667% 91.1765%);
            --shadow-2xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --shadow-2xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
            --destructive: hsl(356.3033 90.5579% 54.3137%);
            --sidebar-ring: hsl(202.8169 89.1213% 53.1373%);
            --sidebar-accent: hsl(205.7143 70% 7.8431%);
            --sidebar-border: hsl(205.7143 15.7895% 26.0784%);
            --card-foreground: hsl(0 0% 85.0980%);
            --sidebar-primary: hsl(202.8169 89.1213% 53.1373%);
            --tracking-normal: 0em;
            --muted-foreground: hsl(210 3.3898% 46.2745%);
            --accent-foreground: hsl(203.7736 87.6033% 52.5490%);
            --popover-foreground: hsl(200 6.6667% 91.1765%);
            --primary-foreground: hsl(0 0% 100%);
            --sidebar-foreground: hsl(0 0% 85.0980%);
            --secondary-foreground: hsl(210 25% 7.8431%);
            --destructive-foreground: hsl(0 0% 100%);
            --sidebar-accent-foreground: hsl(203.7736 87.6033% 52.5490%);
            --sidebar-primary-foreground: hsl(0 0% 100%);
        }

        .chess-square {
            width: 64px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.2s ease;
        }

        .chess-square.light {
            background-color: hsl(48, 100%, 93%);
        }

        .chess-square.dark {
            background-color: hsl(35, 25%, 65%);
        }

        .chess-square:hover {
            opacity: 0.8;
        }

        .chess-square.selected {
            background-color: hsl(60, 100%, 85%) !important;
        }

        .chess-square.legal-move {
            background-color: hsl(120, 50%, 85%) !important;
        }

        .chess-square.last-move {
            background-color: hsl(45, 100%, 75%) !important;
        }

        .chess-piece {
            font-size: 42px;
            cursor: pointer;
            transition: transform 0.2s ease;
            user-select: none;
        }

        .chess-piece:hover {
            transform: scale(1.1);
        }

        .analysis-bar {
            width: 20px;
            height: 200px;
            border-radius: 10px;
            background: linear-gradient(to top, 
                hsl(0, 0%, 20%) 0%, 
                hsl(0, 0%, 20%) 50%, 
                hsl(0, 0%, 90%) 50%, 
                hsl(0, 0%, 90%) 100%);
            position: relative;
            overflow: hidden;
        }

        .analysis-indicator {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, hsl(0, 0%, 10%), hsl(0, 0%, 30%));
            transition: height 0.5s ease;
            height: 60%;
        }

        @media (max-width: 1200px) {
            .chess-square {
                width: 56px;
                height: 56px;
            }
            .chess-piece {
                font-size: 36px;
            }
        }

        @media (max-width: 768px) {
            .chess-square {
                width: 48px;
                height: 48px;
            }
            .chess-piece {
                font-size: 30px;
            }
        }
    </style>
</head>
<body class="bg-background text-foreground font-sans antialiased">
    <!-- @COMPONENT: ChessEngine -->
    <div class="min-h-screen bg-background">
        <!-- Header -->
        <!-- @COMPONENT: Header -->
        <header class="border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-50">
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                            <i class="fas fa-chess-king text-primary-foreground text-lg"></i>
                        </div>
                        <h1 class="text-2xl font-bold text-foreground">Elite Chess Engine</h1>
                    </div>
                    
                    <div class="flex items-center gap-4">
                        <button class="px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors">
                            <i class="fas fa-cog mr-2"></i>Settings
                        </button>
                        <button onclick="toggleTheme()" class="p-2 bg-muted text-muted-foreground rounded-lg hover:bg-muted/80 transition-colors">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>
        <!-- @END_COMPONENT: Header -->

        <div class="container mx-auto px-4 py-6">
            <div class="grid grid-cols-1 xl:grid-cols-12 gap-6">
                <!-- Game Info Panel -->
                <!-- @COMPONENT: GameInfoPanel -->
                <div class="xl:col-span-3 space-y-4">
                    <!-- Player Info -->
                    <div class="bg-card rounded-lg border border-border p-4">
                        <h3 class="font-semibold text-card-foreground mb-3">Players</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-accent rounded-lg">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                                        <i class="fas fa-user text-primary-foreground text-sm"></i>
                                    </div>
                                    <span class="font-medium text-accent-foreground" data-bind="player.name">You</span>
                                </div>
                                <span class="text-2xl">♔</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-muted rounded-lg">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-secondary rounded-full flex items-center justify-center">
                                        <i class="fas fa-robot text-secondary-foreground text-sm"></i>
                                    </div>
                                    <span class="font-medium text-muted-foreground" data-bind="ai.name">AI Engine</span>
                                </div>
                                <span class="text-2xl">♚</span>
                            </div>
                        </div>
                    </div>

                    <!-- AI Controls -->
                    <div class="bg-card rounded-lg border border-border p-4">
                        <h3 class="font-semibold text-card-foreground mb-3">AI Settings</h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Difficulty Level</label>
                                <select class="w-full p-2 bg-input border border-border rounded-lg text-foreground" data-bind="ai.difficulty">
                                    <option value="beginner">Beginner (800-1000)</option>
                                    <option value="intermediate" selected>Intermediate (1200-1500)</option>
                                    <option value="advanced">Advanced (1600-2000)</option>
                                    <option value="master">Master (2000+)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Thinking Time</label>
                                <select class="w-full p-2 bg-input border border-border rounded-lg text-foreground" data-bind="ai.thinkingTime">
                                    <option value="1">1 second</option>
                                    <option value="3" selected>3 seconds</option>
                                    <option value="5">5 seconds</option>
                                    <option value="10">10 seconds</option>
                                </select>
                            </div>
                            <button class="w-full px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/80 transition-colors" data-event="click:requestAIMove">
                                <i class="fas fa-brain mr-2"></i>Request AI Move
                            </button>
                        </div>
                    </div>

                    <!-- Game Controls -->
                    <div class="bg-card rounded-lg border border-border p-4">
                        <h3 class="font-semibold text-card-foreground mb-3">Game Controls</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="px-3 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors text-sm" data-event="click:newGame">
                                <i class="fas fa-plus mr-1"></i>New
                            </button>
                            <button class="px-3 py-2 bg-muted text-muted-foreground rounded-lg hover:bg-muted/80 transition-colors text-sm" data-event="click:saveGame">
                                <i class="fas fa-save mr-1"></i>Save
                            </button>
                            <button class="px-3 py-2 bg-muted text-muted-foreground rounded-lg hover:bg-muted/80 transition-colors text-sm" data-event="click:loadGame">
                                <i class="fas fa-folder-open mr-1"></i>Load
                            </button>
                            <button class="px-3 py-2 bg-muted text-muted-foreground rounded-lg hover:bg-muted/80 transition-colors text-sm" data-event="click:exportPGN">
                                <i class="fas fa-download mr-1"></i>PGN
                            </button>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: GameInfoPanel -->

                <!-- Chess Board -->
                <!-- @COMPONENT: ChessBoard -->
                <div class="xl:col-span-6 flex flex-col items-center">
                    <div class="bg-card rounded-xl border border-border p-6 shadow-lg">
                        <!-- Board Coordinates -->
                        <div class="flex items-center justify-center mb-4">
                            <div class="text-center">
                                <div class="text-lg font-semibold text-card-foreground mb-2">Move <span data-bind="game.moveNumber" class="text-primary">12</span></div>
                                <div class="text-sm text-muted-foreground">White to move</div>
                            </div>
                        </div>

                        <!-- Chess Board Container -->
                        <div class="relative">
                            <!-- Column Labels -->
                            <div class="flex mb-1">
                                <div class="w-8"></div>
                                <!-- @MAP: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'].map(letter => ( -->
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">a</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">b</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">c</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">d</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">e</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">f</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">g</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">h</div>
                                <!-- @END_MAP )) -->
                            </div>

                            <!-- Game Board -->
                            <div class="border-2 border-secondary rounded-lg overflow-hidden">
                                <!-- @MAP: Array(8).fill(0).map((_, row) => ( -->
                                <div class="flex">
                                    <div class="w-8 h-16 flex items-center justify-center text-xs font-medium text-muted-foreground bg-muted/50">8</div>
                                    <div class="chess-square dark" data-square="a8" data-event="click:handleSquareClick"><span class="chess-piece">♜</span></div>
                                    <div class="chess-square light" data-square="b8" data-event="click:handleSquareClick"><span class="chess-piece">♞</span></div>
                                    <div class="chess-square dark" data-square="c8" data-event="click:handleSquareClick"><span class="chess-piece">♝</span></div>
                                    <div class="chess-square light" data-square="d8" data-event="click:handleSquareClick"><span class="chess-piece">♛</span></div>
                                    <div class="chess-square dark" data-square="e8" data-event="click:handleSquareClick"><span class="chess-piece">♚</span></div>
                                    <div class="chess-square light" data-square="f8" data-event="click:handleSquareClick"><span class="chess-piece">♝</span></div>
                                    <div class="chess-square dark" data-square="g8" data-event="click:handleSquareClick"><span class="chess-piece">♞</span></div>
                                    <div class="chess-square light" data-square="h8" data-event="click:handleSquareClick"><span class="chess-piece">♜</span></div>
                                </div>
                                <div class="flex">
                                    <div class="w-8 h-16 flex items-center justify-center text-xs font-medium text-muted-foreground bg-muted/50">7</div>
                                    <div class="chess-square light" data-square="a7" data-event="click:handleSquareClick"><span class="chess-piece">♟</span></div>
                                    <div class="chess-square dark" data-square="b7" data-event="click:handleSquareClick"><span class="chess-piece">♟</span></div>
                                    <div class="chess-square light" data-square="c7" data-event="click:handleSquareClick"><span class="chess-piece">♟</span></div>
                                    <div class="chess-square dark" data-square="d7" data-event="click:handleSquareClick"><span class="chess-piece">♟</span></div>
                                    <div class="chess-square light" data-square="e7" data-event="click:handleSquareClick"><span class="chess-piece">♟</span></div>
                                    <div class="chess-square dark" data-square="f7" data-event="click:handleSquareClick"><span class="chess-piece">♟</span></div>
                                    <div class="chess-square light" data-square="g7" data-event="click:handleSquareClick"><span class="chess-piece">♟</span></div>
                                    <div class="chess-square dark" data-square="h7" data-event="click:handleSquareClick"><span class="chess-piece">♟</span></div>
                                </div>
                                <div class="flex">
                                    <div class="w-8 h-16 flex items-center justify-center text-xs font-medium text-muted-foreground bg-muted/50">6</div>
                                    <div class="chess-square dark" data-square="a6" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="b6" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="c6" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="d6" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="e6" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="f6" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="g6" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="h6" data-event="click:handleSquareClick"></div>
                                </div>
                                <div class="flex">
                                    <div class="w-8 h-16 flex items-center justify-center text-xs font-medium text-muted-foreground bg-muted/50">5</div>
                                    <div class="chess-square light" data-square="a5" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="b5" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="c5" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="d5" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="e5" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="f5" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="g5" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="h5" data-event="click:handleSquareClick"></div>
                                </div>
                                <div class="flex">
                                    <div class="w-8 h-16 flex items-center justify-center text-xs font-medium text-muted-foreground bg-muted/50">4</div>
                                    <div class="chess-square dark" data-square="a4" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="b4" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="c4" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="d4" data-event="click:handleSquareClick"><span class="chess-piece">♙</span></div>
                                    <div class="chess-square dark" data-square="e4" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="f4" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="g4" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="h4" data-event="click:handleSquareClick"></div>
                                </div>
                                <div class="flex">
                                    <div class="w-8 h-16 flex items-center justify-center text-xs font-medium text-muted-foreground bg-muted/50">3</div>
                                    <div class="chess-square light" data-square="a3" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="b3" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="c3" data-event="click:handleSquareClick"><span class="chess-piece">♘</span></div>
                                    <div class="chess-square dark" data-square="d3" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="e3" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="f3" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="g3" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="h3" data-event="click:handleSquareClick"></div>
                                </div>
                                <div class="flex">
                                    <div class="w-8 h-16 flex items-center justify-center text-xs font-medium text-muted-foreground bg-muted/50">2</div>
                                    <div class="chess-square dark" data-square="a2" data-event="click:handleSquareClick"><span class="chess-piece">♙</span></div>
                                    <div class="chess-square light" data-square="b2" data-event="click:handleSquareClick"><span class="chess-piece">♙</span></div>
                                    <div class="chess-square dark" data-square="c2" data-event="click:handleSquareClick"><span class="chess-piece">♙</span></div>
                                    <div class="chess-square light" data-square="d2" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square dark" data-square="e2" data-event="click:handleSquareClick"><span class="chess-piece">♙</span></div>
                                    <div class="chess-square light" data-square="f2" data-event="click:handleSquareClick"><span class="chess-piece">♙</span></div>
                                    <div class="chess-square dark" data-square="g2" data-event="click:handleSquareClick"><span class="chess-piece">♙</span></div>
                                    <div class="chess-square light" data-square="h2" data-event="click:handleSquareClick"><span class="chess-piece">♙</span></div>
                                </div>
                                <div class="flex">
                                    <div class="w-8 h-16 flex items-center justify-center text-xs font-medium text-muted-foreground bg-muted/50">1</div>
                                    <div class="chess-square light" data-square="a1" data-event="click:handleSquareClick"><span class="chess-piece">♖</span></div>
                                    <div class="chess-square dark" data-square="b1" data-event="click:handleSquareClick"></div>
                                    <div class="chess-square light" data-square="c1" data-event="click:handleSquareClick"><span class="chess-piece">♗</span></div>
                                    <div class="chess-square dark" data-square="d1" data-event="click:handleSquareClick"><span class="chess-piece">♕</span></div>
                                    <div class="chess-square light" data-square="e1" data-event="click:handleSquareClick"><span class="chess-piece">♔</span></div>
                                    <div class="chess-square dark" data-square="f1" data-event="click:handleSquareClick"><span class="chess-piece">♗</span></div>
                                    <div class="chess-square light" data-square="g1" data-event="click:handleSquareClick"><span class="chess-piece">♘</span></div>
                                    <div class="chess-square dark" data-square="h1" data-event="click:handleSquareClick"><span class="chess-piece">♖</span></div>
                                </div>
                                <!-- @END_MAP )) -->
                            </div>

                            <!-- Row Labels -->
                            <div class="flex mt-1">
                                <div class="w-8"></div>
                                <!-- @MAP: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'].map(letter => ( -->
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">a</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">b</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">c</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">d</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">e</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">f</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">g</div>
                                <div class="chess-square flex items-center justify-center text-xs font-medium text-muted-foreground">h</div>
                                <!-- @END_MAP )) -->
                            </div>
                        </div>

                        <!-- Game Status -->
                        <div class="mt-4 text-center">
                            <div class="inline-flex items-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg">
                                <div class="w-2 h-2 bg-primary rounded-full animate-pulse"></div>
                                <span class="text-sm font-medium text-primary" data-bind="game.status">Game in progress</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: ChessBoard -->

                <!-- Analysis Panel -->
                <!-- @COMPONENT: AnalysisPanel -->
                <div class="xl:col-span-3 space-y-4">
                    <!-- Position Analysis -->
                    <div class="bg-card rounded-lg border border-border p-4">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold text-card-foreground">Position Analysis</h3>
                            <button class="text-primary hover:text-primary/80 transition-colors" data-event="click:toggleAnalysis">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        
                        <div class="flex items-center gap-4 mb-4">
                            <div class="analysis-bar">
                                <div class="analysis-indicator"></div>
                            </div>
                            <div class="flex-1">
                                <div class="text-sm text-muted-foreground mb-1">Evaluation</div>
                                <div class="text-lg font-semibold text-card-foreground" data-bind="analysis.evaluation">+0.3</div>
                                <div class="text-xs text-muted-foreground">White slightly better</div>
                            </div>
                        </div>

                        <div class="space-y-2">
                            <div class="text-sm font-medium text-card-foreground mb-2">Best Move</div>
                            <div class="p-3 bg-accent rounded-lg">
                                <div class="flex items-center justify-between">
                                    <span class="font-mono text-accent-foreground" data-bind="analysis.bestMove">Nf3</span>
                                    <span class="text-xs text-muted-foreground" data-bind="analysis.confidence">95% confident</span>
                                </div>
                                <div class="text-xs text-muted-foreground mt-1" data-bind="analysis.reasoning">Develops knight, controls center</div>
                            </div>
                        </div>
                    </div>

                    <!-- Engine Analysis -->
                    <div class="bg-card rounded-lg border border-border p-4">
                        <h3 class="font-semibold text-card-foreground mb-3">Engine Lines</h3>
                        <div class="space-y-2">
                            <!-- @MAP: engineLines.map(line => ( -->
                            <div class="p-2 bg-muted rounded text-sm">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="font-mono text-xs text-muted-foreground" data-bind="line.evaluation">+0.3</span>
                                    <span class="text-xs text-muted-foreground" data-bind="line.depth">Depth 12</span>
                                </div>
                                <div class="font-mono text-xs text-foreground" data-bind="line.moves">1. Nf3 Nf6 2. d4 d5 3. c4</div>
                            </div>
                            <div class="p-2 bg-muted rounded text-sm">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="font-mono text-xs text-muted-foreground">+0.1</span>
                                    <span class="text-xs text-muted-foreground">Depth 12</span>
                                </div>
                                <div class="font-mono text-xs text-foreground">1. e4 e5 2. Nf3 Nc6 3. Bc4</div>
                            </div>
                            <div class="p-2 bg-muted rounded text-sm">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="font-mono text-xs text-muted-foreground">0.0</span>
                                    <span class="text-xs text-muted-foreground">Depth 12</span>
                                </div>
                                <div class="font-mono text-xs text-foreground">1. d4 d5 2. c4 e6 3. Nc3</div>
                            </div>
                            <!-- @END_MAP )) -->
                        </div>
                    </div>

                    <!-- Move History -->
                    <div class="bg-card rounded-lg border border-border p-4">
                        <h3 class="font-semibold text-card-foreground mb-3">Move History</h3>
                        <div class="max-h-64 overflow-y-auto">
                            <div class="space-y-1">
                                <!-- @MAP: moveHistory.map((move, index) => ( -->
                                <div class="flex items-center gap-2 p-2 hover:bg-muted rounded text-sm cursor-pointer transition-colors" data-event="click:goToMove" data-move-index="0">
                                    <span class="w-6 text-xs text-muted-foreground font-mono">1.</span>
                                    <span class="font-mono text-foreground" data-bind="move.white">e4</span>
                                    <span class="font-mono text-foreground" data-bind="move.black">e5</span>
                                </div>
                                <div class="flex items-center gap-2 p-2 hover:bg-muted rounded text-sm cursor-pointer transition-colors" data-event="click:goToMove" data-move-index="1">
                                    <span class="w-6 text-xs text-muted-foreground font-mono">2.</span>
                                    <span class="font-mono text-foreground">Nf3</span>
                                    <span class="font-mono text-foreground">Nc6</span>
                                </div>
                                <div class="flex items-center gap-2 p-2 hover:bg-muted rounded text-sm cursor-pointer transition-colors" data-event="click:goToMove" data-move-index="2">
                                    <span class="w-6 text-xs text-muted-foreground font-mono">3.</span>
                                    <span class="font-mono text-foreground">Bc4</span>
                                    <span class="font-mono text-foreground">Bc5</span>
                                </div>
                                <div class="flex items-center gap-2 p-2 hover:bg-muted rounded text-sm cursor-pointer transition-colors" data-event="click:goToMove" data-move-index="3">
                                    <span class="w-6 text-xs text-muted-foreground font-mono">4.</span>
                                    <span class="font-mono text-foreground">d3</span>
                                    <span class="font-mono text-foreground">d6</span>
                                </div>
                                <div class="flex items-center gap-2 p-2 hover:bg-muted rounded text-sm cursor-pointer transition-colors" data-event="click:goToMove" data-move-index="4">
                                    <span class="w-6 text-xs text-muted-foreground font-mono">5.</span>
                                    <span class="font-mono text-foreground">Nc3</span>
                                    <span class="font-mono text-foreground">Nf6</span>
                                </div>
                                <div class="flex items-center gap-2 p-2 hover:bg-muted rounded text-sm cursor-pointer transition-colors" data-event="click:goToMove" data-move-index="5">
                                    <span class="w-6 text-xs text-muted-foreground font-mono">6.</span>
                                    <span class="font-mono text-foreground">0-0</span>
                                    <span class="font-mono text-muted-foreground">...</span>
                                </div>
                                <!-- @END_MAP )) -->
                            </div>
                        </div>
                        
                        <div class="mt-3 pt-3 border-t border-border">
                            <div class="flex gap-2">
                                <button class="p-2 bg-muted text-muted-foreground rounded hover:bg-muted/80 transition-colors" data-event="click:previousMove">
                                    <i class="fas fa-chevron-left text-xs"></i>
                                </button>
                                <button class="p-2 bg-muted text-muted-foreground rounded hover:bg-muted/80 transition-colors" data-event="click:nextMove">
                                    <i class="fas fa-chevron-right text-xs"></i>
                                </button>
                                <button class="p-2 bg-muted text-muted-foreground rounded hover:bg-muted/80 transition-colors" data-event="click:goToStart">
                                    <i class="fas fa-fast-backward text-xs"></i>
                                </button>
                                <button class="p-2 bg-muted text-muted-foreground rounded hover:bg-muted/80 transition-colors" data-event="click:goToEnd">
                                    <i class="fas fa-fast-forward text-xs"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Opening Database -->
                    <div class="bg-card rounded-lg border border-border p-4">
                        <h3 class="font-semibold text-card-foreground mb-3">Opening Book</h3>
                        <div class="space-y-2">
                            <div class="text-sm font-medium text-card-foreground" data-bind="opening.name">Italian Game</div>
                            <div class="text-xs text-muted-foreground mb-3" data-bind="opening.eco">C50</div>
                            
                            <div class="space-y-1">
                                <div class="text-xs font-medium text-card-foreground mb-1">Statistics</div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-muted-foreground">White wins:</span>
                                    <span class="text-foreground" data-bind="opening.stats.white">38%</span>
                                </div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-muted-foreground">Draws:</span>
                                    <span class="text-foreground" data-bind="opening.stats.draws">31%</span>
                                </div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-muted-foreground">Black wins:</span>
                                    <span class="text-foreground" data-bind="opening.stats.black">31%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: AnalysisPanel -->
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: ChessEngine -->

    <script>
        // TODO: Implement chess engine logic, AI move generation, and position analysis
        // TODO: Integrate Chess.js library for game logic and move validation
        // TODO: Implement minimax algorithm with alpha-beta pruning for AI
        // TODO: Add drag-and-drop functionality for piece movement
        // TODO: Implement position evaluation and best move calculation
        // TODO: Add game state management (save/load, PGN export)
        // TODO: Integrate opening book database
        
        (function() {
            // Mock data for demonstration
            let selectedSquare = null;
            let gameState = {
                currentPlayer: 'white',
                moveNumber: 12,
                status: 'Game in progress'
            };

            // Theme toggle functionality
            window.toggleTheme = function() {
                document.documentElement.classList.toggle('dark');
                const isDark = document.documentElement.classList.contains('dark');
                const icon = document.querySelector('.fa-moon');
                icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
            };

            // Mock square click handler
            function handleSquareClick(event) {
                const square = event.currentTarget;
                const squareId = square.dataset.square;
                
                // Remove previous highlights
                document.querySelectorAll('.chess-square').forEach(sq => {
                    sq.classList.remove('selected', 'legal-move');
                });

                if (selectedSquare === squareId) {
                    selectedSquare = null;
                    return;
                }

                selectedSquare = squareId;
                square.classList.add('selected');
                
                // Mock legal move highlighting
                if (square.querySelector('.chess-piece')) {
                    // Show legal moves for this piece (mock implementation)
                    setTimeout(() => {
                        const mockLegalMoves = ['d5', 'e5', 'f5']; // Mock data
                        mockLegalMoves.forEach(moveSquare => {
                            const targetSquare = document.querySelector(`[data-square="${moveSquare}"]`);
                            if (targetSquare) {
                                targetSquare.classList.add('legal-move');
                            }
                        });
                    }, 100);
                }
            }

            // Add event listeners
            document.querySelectorAll('[data-square]').forEach(square => {
                square.addEventListener('click', handleSquareClick);
            });

            // Mock AI move request
            document.querySelector('[data-event="click:requestAIMove"]')?.addEventListener('click', function() {
                this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Thinking...';
                this.disabled = true;
                
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-brain mr-2"></i>Request AI Move';
                    this.disabled = false;
                    
                    // Mock AI move animation
                    const fromSquare = document.querySelector('[data-square="g8"]');
                    const toSquare = document.querySelector('[data-square="f6"]');
                    
                    if (fromSquare && toSquare) {
                        fromSquare.classList.add('last-move');
                        toSquare.classList.add('last-move');
                        
                        // Move piece (mock)
                        const piece = fromSquare.querySelector('.chess-piece');
                        if (piece) {
                            toSquare.appendChild(piece);
                        }
                    }
                }, 2000);
            });

            // Mock analysis toggle
            document.querySelector('[data-event="click:toggleAnalysis"]')?.addEventListener('click', function() {
                const icon = this.querySelector('i');
                icon.classList.add('fa-spin');
                
                setTimeout(() => {
                    icon.classList.remove('fa-spin');
                    // Update analysis values (mock)
                    document.querySelector('[data-bind="analysis.evaluation"]').textContent = '+0.5';
                    document.querySelector('[data-bind="analysis.bestMove"]').textContent = 'Bd2';
                }, 1500);
            });

            // Mock move history navigation
            document.querySelectorAll('[data-event*="Move"], [data-event*="ToStart"], [data-event*="ToEnd"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Mock move navigation
                    console.log('Navigate moves:', this.dataset.event);
                });
            });

            // Mock game controls
            document.querySelectorAll('[data-event*="Game"], [data-event*="PGN"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Mock game control actions
                    console.log('Game control:', this.dataset.event);
                });
            });

            // Initialize analysis bar animation
            setTimeout(() => {
                const indicator = document.querySelector('.analysis-indicator');
                if (indicator) {
                    indicator.style.height = '55%';
                }
            }, 1000);
        })();
    </script>
</body>
</html>